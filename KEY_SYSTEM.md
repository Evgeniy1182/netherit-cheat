# Key System Documentation

## Алгоритм работы системы ключей

Система ключей использует SHA-256 хеширование для генерации уникальных ключей на основе Hardware ID (HWID) пользователя.

### Инжектор (C#)

**Файлы:**
- `KeySystem.cs` - основная логика системы ключей
- `AuthForm.cs` - форма авторизации с интегрированной проверкой ключа

**Функционал:**
1. **GetHWID()** - получает уникальный идентификатор компьютера на основе:
   - CPU ID (ProcessorId из WMI)
   - Disk Serial Number (SerialNumber из WMI)
   
2. **GenerateKey(hwid)** - генерирует ключ в формате `XXXX-XXXX-XXXX-XXXX`:
   - Комбинирует HWID + SECRET
   - Вычисляет SHA-256 хеш
   - Берет первые 16 символов в формате XXXX-XXXX-XXXX-XXXX

3. **ValidateKey(hwid, key)** - проверяет валидность ключа:
   - Генерирует ожидаемый ключ для данного HWID
   - Сравнивает с введенным ключом (case-insensitive)

### Веб-сайт (JavaScript)

**Файлы:**
- `src/utils/keySystem.js` - алгоритм генерации/проверки ключей
- `src/components/KeyGenerator.jsx` - компонент для генерации ключей
- `src/pages/Dashboard.jsx` - панель управления с генератором

**Функционал:**
1. **generateKey(hwid)** - генерирует ключ (идентичный алгоритм с C#):
   - Использует Web Crypto API для SHA-256
   - Возвращает ключ в формате XXXX-XXXX-XXXX-XXXX

2. **validateKey(hwid, key)** - проверяет валидность ключа

3. **generateDemoHWID()** - генерирует демонстрационный HWID для тестов

4. **formatKey(key)** - форматирует ключ в правильный формат

## Использование

### Для пользователя:
1. Запустить инжектор
2. Скопировать свой HWID (кликнуть по нему в форме авторизации)
3. Отправить HWID администратору
4. Получить ключ и ввести его в инжектор

### Для администратора:
1. Зайти в Dashboard на сайте
2. Вставить HWID пользователя в генератор ключей
3. Нажать "Сгенерировать ключ"
4. Скопировать сгенерированный ключ
5. Отправить ключ пользователю

## Безопасность

- SECRET ключ должен быть одинаковым в обоих местах
- HWID уникален для каждого компьютера
- Ключ валиден только для конкретного HWID
- Алгоритм синхронизирован между C# и JavaScript

## Конфигурация

**SECRET ключ (должен совпадать):**
- C#: `KeySystem.cs` → `private const string SECRET = "NETHERIT_2026_SECRET_KEY";`
- JS: `keySystem.js` → `const SECRET = "NETHERIT_2026_SECRET_KEY";`

> **Важно:** Для production использования замените SECRET на свой уникальный ключ!
